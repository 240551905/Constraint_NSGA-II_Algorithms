function F=fitness(X) 
Index=[4,9,11,14,17,19,22,25,29,33,37,42,45,51,53,58,62,66,69];
time=[5,9,11,11,3,2,4,11,3,6,12,7,9,5,9,10,2,10,12,9,5,10,3,6,11,5,5,3,2,9,4,...
      5,7,3,8,3,8,9,3,6,9,6,2,7,9,7,11,8,11,3,3,10,6,4,11,5,10,0.0001,...
      11,8,10,5,5,11,6,0.0001,9,8,3,0];
cost=[95;48;60;44;28;91;59;5;64;36;55;89;39;91;64;7;93;71;100;21;18;94;71;11;77;...
      77;93;73;17;7;7;8;28;87;56;58;85;17;32;61;97;58;7;81;27;82;42;87;76;58;18;...
      11;17;9;15;26;73;0;6;12;97;59;24;29;76;0;60;97;85;0];
D=[0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0;...
   0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0;...
   0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0;...
   0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0;...
   0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0;...
   0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0;...
   0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0;...
   0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0;...
   0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1;...
   0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0;...
   0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0;...
   0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0;...
   0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0;...
   0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0;...
   0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,1;...
   0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0;...
   0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0;...
   0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0;...
   0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];
Performance=[0.7195;1.4813;1.8598;2.4869;...
             0.47037;0.0557;0.2100;1.4590;...
             1.8189;1.7065;0.9520;2.9658;...
             1.7392;1.1404;1.6528;2.2360;...
             2.0076;0.7947;0.1990;1.1102;...
             1.8891;0.6305;2.2582;0.1996;...
             0.7809;2.4142;0.5803;1.9183;...
             1.5740;2.7744;0.7898;0.1978;...
             2.2051;2.3165;2.7234;2.7959;...
             0.0418;0.7030;1.8503;2.8470;...
             2.8505;1.6699;2.7468;1.9246;...
             1.1700;1.4579;1.8129;1.6486;...
             2.7785;2.7562;1.1846;2.8897;...
             0.5218;0.3789;0.4052;1.5169;...
             0.0645;0;2.4813;0.0450;0.5285;...
             0.9961;0.3929;2.4284;1.03421;0;...
             1.7460;2.6364;2.5342;0];
m=Index(end);
for i = 1:size(X,1)
    idx = floor(X(i,:));
x = zeros(1,m+1);
%temp = [0,5,8,12,14,16,20,24,27,30,34,37,41,45,49,53,58,62,65,70,74,76,80,84,88,92,96,98,103];
temp = [0,4,9,11,14,17,19,22,25,29,33,37,42,45,51,53,58,62,66];
 x(idx(idx>0)+temp) = 1;
     if (x(18)~=x(45))&&(x(18)==1)
        x(45)=1;
        x(43)=0;
        x(44)=0;
    elseif (x(18)~=x(45))&&(x(45)==1)
        x(18)=1;
        x(19)=0;
     end
    if (x(14)~=x(59))&&(x(14)==1)
        x(59)=1;
        x(60)=0;
        x(61)=0;
        x(62)=0;
    elseif (x(14)~=x(59))&&(x(59)==1)
        x(14)=1;
        x(12)=0;
        x(13)=0;
    end
    if (x(64)~=x(68))&&(x(64)==1)
        x(68)=1;
        x(67)=0;
        x(69)=0;
    elseif (x(64)~=x(68))&&(x(68)==1)
        x(64)=1;
        x(63)=0;
        x(65)=0;
        x(66)=0;
    end
    if (x(15)~=x(27))&&(x(15)==1)
        x(27)=1;
        x(26)=0;
        x(28)=0;
        x(29)=0;
    elseif (x(15)~=x(27))&&(x(27)==1)
        x(15)=1;
        x(16)=0;
        x(17)=0;
    end
    if (x(2)~=x(49))&&(x(2)==1)
        x(49)=1;
        x(46)=0;
        x(47)=0;
        x(48)=0;
        x(50)=0;
        x(51)=0;
    elseif (x(2)~=x(49))&&(x(49)==1)
        x(2)=1;
        x(1)=0;
        x(3)=0;
        x(4)=0;
    end
    if (x(22)==x(39))&&(x(39)==1)
        x(22)=0;
        x(20)=round(rand(1));
        x(21)=1-x(20);
    elseif (x(22)==x(39))&&(x(39)==0)
        x(22)=1;
        x(20)=0;
        x(21)=0;
    end
    if (x(6)==x(53))&&(x(6)==1)
        x(53)=0;
        x(52)=1;
    elseif (x(6)==x(53))&&(x(6)==0)
        x(53)=0;
        x(52)=1;
    end
    if (x(33)==x(58))&&(x(58)==1)
        x(33)=0;
        x(30)=round(rand(1));
        x(31)=1-x(30);
        x(32)=0;
    elseif (x(33)==x(58))&&(x(58)==0)
        x(33)=1;
        x(30)=0;
        x(31)=0;
        x(32)=0;
    end
    x(end)=1;
%cost=[20;60;90;12;6;50;46;60;120;25;12;5;88;74;160;9.7;32;68;91.5;82;192;120;457;330;10;32;95;0;34;22;9.3;13;6;8;0;70;96;82;94;12;63;60;190;120;250;0;10;60;0];
%time=[4,5,7,2,3,5,4,5,8,2,1,1,4,5,8,2,3,3,5,6,8,9,2,3,4,0.0001,1,1,2,2,2,2,0.0001,22,17,18,5,2,3,1,3,2,1,0.0001,2,7,0];
%The first function 
F(i,1)=x*cost;
%The second function
nu=size(D,2);
rr=x.*time;
CC=rr(rr~=0)';
pp=repmat(CC,1,nu);
C=pp.*D;
%C=timehandle(x,A,m);
n1=size(C,2);
ST=zeros(1,n1);
  for k=2:n1
      tt=0;
      for l=1:(k-1)
          if (C(l,k)>0)&&(C(l,k))~=0.0001
              tt=[tt,C(l,k)+ST(l)];
          elseif C(l,k)==0.0001
              C(l,k)=0;
              tt=[tt,C(l,k)+ST(l)];
          end
      end
      ST(k)=max(tt);
  end
  F(i,2)=ST(n1);
%The third function
%F(i,3)=-(x*Performance-26.5234)/(56.6129-26.5234);
F(i,3)=-x*Performance;
%F(i,3)=-(x*Performance);
end
