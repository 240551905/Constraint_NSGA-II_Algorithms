function F=fitness(X)
Index=[5,9,14,18,22,25,30,32,35,38,42,45,50,55,57,61,63,66,68,73,76,81,85,90,93,95,99,102,106];
D=[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0;0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0;...
   0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0;...
   0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0;0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0;...
   0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1;0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;...
   0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0;...
   0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1;0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,0,1,0,0;...
   0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0;0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0;...
   0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0;0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1;...
   0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0;0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0;...
   0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0;0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0;...
   0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0;0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0;...
   0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0;0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0;...
   0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0;0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1;...
   0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1;0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1;...
   0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];
time=[2,3,6,6,7,5,7,5,7,9,3,5,6,8,4,7,7,10,5,7,3,6,3,10,5,9,5,10,5,4,7,9,10,7,2,7,3,8,10,6,7,2,6,2,7,5,9,1,2,8,6,7,9,6,9,...
      6,0.000100000000000000,8,2,5,0.000100000000000000,5,3,6,5,7,5,4,5,5,10,11,7,2,8,8,9,4,2,7,2,9,9,5,10,3,10,6,9,9,11,...
      11,1,1,6,1,8,6,0.000100000000000000,5,4,10,8,1,2,7,0];
cost=[36;47;80;42;93;75;60;26;47;79;99;17;22;77;85;18;85;81;72;41;50;43;86;40;39;94;93;97;83;18;18;60;87;90;67;96;24;30;...
      40;33;38;21;44;13;58;95;50;66;65;94;76;84;40;92;27;47;0;40;90;87;0;31;15;87;41;45;34;21;51;31;61;28;56;95;43;96;15;...
      59;64;97;93;56;78;98;76;96;95;53;69;26;49;88;62;35;21;31;21;31;0;14;85;46;61;67;22;17;0];
Performance=[0.782661063658766;4.93112361665026;0.522576209916347;2.11327960732802;4.37531173567007;2.92137826354394;0.0876683568589448;4.44351290518206;1.92073831607713;0.838651038769598;1.68589915328078;2.97074065937183;0.188725900180819;3.21654260657251;3.05053200159261;1.14396961058512;2.13008880112672;0.967574817322766;0.106649197507772;2.91959936973327;2.22678522263679;4.21028324021010;0.995278269818770;2.20299523580706;3.33727266264053;0.341673150085313;1.77668314441564;3.43018151572133;1.22535948522077;1.81988661233022;2.88681849395490;2.04717796138524;4.38390751335877;4.29940639029951;4.16988446342350;2.13135583344848;0.950649977961908;3.19431551571798;2.14077490721100;2.52903535389129;3.25525779183879;4.69970767267666;4.04124863316970;0.616083166244627;4.53731104509839;3.38533666354415;1.59712597584736;3.64996494275625;2.37481959586430;2.80516281907725;2.85912346821692;0.757446246224088;1.80991059140548;2.17867370622000;0.288625495844913;3.61866255374419;0;2.38426432915575;4.74028902660830;4.33984164564203;0;2.00135851394113;2.85617101942583;0.597409588823027;3.98092189275596;1.61875980041206;0.578143269334475;3.53599924254501;2.57454119042415;0.135502004802200;2.81391806568043;3.82104422223799;0.155213340008158;3.28793810352371;1.25070955568660;2.17638154095142;0.360837100337947;2.66114261457510;4.69414454327812;1.52407853846622;0.317686895209428;4.24113163667004;4.73796782634586;2.45535375296161;4.54254742220955;4.54320206284409;3.67259589998038;4.15663666075350;0.810021169520255;4.22769550207970;2.07821162078832;1.43343518195976;2.80931134851343;4.28746617411782;2.16584326904417;0.388843839629224;1.43639140121159;1.42655465966394;0;4.77532968836583;2.75073713794026;1.26806262883473;3.51564940025853;0.738635058363901;0.308145469633092;3.24503867031864;0];
m=Index(end);
for i = 1:size(X,1)
    idx = floor(X(i,:));
x = zeros(1,m+1);
temp =[0,5,9,14,18,22,25,30,32,35,38,42,45,50,55,57,61,63,66,68,73,76,81,85,90,93,95,99,102];
    x(idx(idx>0)+temp) = 1;
    if (x(25)~=x(66))&&(x(25)==1)
        x(66)=1;
        x(64)=0;
        x(65)=0;
    elseif (x(25)~=x(66))&&(x(66)==1)
        x(25)=1;
        x(23)=0;
        x(24)=0;
    end
    if (x(75)~=x(106))&&(x(75)==1)
        x(106)=1;
        x(103)=0;
        x(104)=0;
        x(105)=0;
    elseif (x(75)~=x(106))&&(x(106)==1)
        x(75)=1;
        x(74)=0;
        x(76)=0;
    end
    if (x(9)~=x(61))&&(x(9)==1)
        x(61)=1;
        x(58)=0;
        x(59)=0;
        x(60)=0;
    elseif (x(9)~=x(61))&&(x(61)==1)
        x(9)=1;
        x(6)=0;
        x(7)=0;
        x(8)=0;
    end
    if (x(37)~=x(47))&&(x(37)==1)
        x(47)=1;
        x(46)=0;
        x(48)=0;
        x(49)=0;
        x(50)=0;
    elseif (x(37)~=x(47))&&(x(47)==1)
        x(37)=1;
        x(36)=0;
        x(38)=0;
    end
    if (x(62)==x(102))&&(x(62)==1)
        x(102)=0;
        x(100)=round(rand(1));
        x(101)=1-x(100);
    elseif (x(62)==x(102))&&(x(62)==0)
        x(102)=1;
        x(100)=0;
        x(101)=0;
    end
    x(end)=1;
%cost=[20;60;90;12;6;50;46;60;120;25;12;5;88;74;160;9.7;32;68;91.5;82;192;120;457;330;10;32;95;0;34;22;9.3;13;6;8;0;70;96;82;94;12;63;60;190;120;250;0;10;60;0];
%time=[4,5,7,2,3,5,4,5,8,2,1,1,4,5,8,2,3,3,5,6,8,9,2,3,4,0.0001,1,1,2,2,2,2,0.0001,22,17,18,5,2,3,1,3,2,1,0.0001,2,7,0];
%The first function 
F(i,1)=x*cost;
%The second function
nu=size(D,2);
rr=x.*time;
CC=rr(rr~=0)';
pp=repmat(CC,1,nu);
C=pp.*D;
%C=timehandle(x,A,m);
n1=size(C,2);
ST=zeros(1,n1);
  for k=2:n1
      tt=0;
      for l=1:(k-1)
          if (C(l,k)>0)&&(C(l,k))~=0.0001
              tt=[tt,C(l,k)+ST(l)];
          elseif C(l,k)==0.0001
              C(l,k)=0;
              tt=[tt,C(l,k)+ST(l)];
          end
      end
      ST(k)=max(tt);
  end
  F(i,2)=ST(n1);
%The third function
%F(i,3)=-(x*Performance-26.5234)/(56.6129-26.5234);
F(i,3)=-x*Performance;
%F(i,3)=-(x*Performance);
end
